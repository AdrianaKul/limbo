
language: cpp

os:
  - linux

sudo: required

dist: trusty

compiler:
  - gcc
  - clang

env:
  global:
    - CI_HOME=`pwd`
  matrix:
    - LIBCMAES=ON NLOPT=ON
    - LIBCMAES=ON NLOPT=OFF
    - LIBCMAES=OFF NLOPT=ON
    - LIBCMAES=OFF NLOPT=OFF

addons:
  apt:
    packages:
    - libboost1.55-all-dev
    - libeigen3-dev
    - libtbb-dev
    - libgtest-dev
    - autoconf
    - automake
    - libtool
    - libgoogle-glog-dev
    - libgflags-dev

install:
  - if [ "$LIBCMAES" = "ON" ]; then 'cd /usr/src/gtest && sudo mkdir build && cd build && sudo cmake .. && sudo make && sudo cp *.a /usr/lib && cd && git clone https://github.com/beniz/libcmaes.git && cd libcmaes && ./autogen.sh && ./configure && make && sudo make install && cd && cd $CI_HOME && sudo ldconfig' ; fi
  - if [ "$NLOPT" = "ON"]; then 'cd && wget http://ab-initio.mit.edu/nlopt/nlopt-2.4.2.tar.gz && tar -zxvf nlopt-2.4.2.tar.gz && cd nlopt-2.4.2 && ./configure -with-cxx --enable-shared   --without-python --without-matlab --without-octave && sudo make install && cd $CI_HOME && sudo ldconfig' ; fi


# Change this to your needs
script:
  - ./waf configure
  - ./waf --tests --alltests -v
